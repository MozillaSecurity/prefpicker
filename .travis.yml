dist: bionic
cache: pip
language: python
os: linux
python:
  - 3.5
  - 3.6
  - 3.7
  - 3.8
jobs:
  include:
    - os: windows
      python: 3.8
      language: shell
      before_install:
        - choco install python --version 3.8
      env: PATH=/c/Python38:/c/Python38/Scripts:$PATH
before_install:
  - pip install --upgrade setuptools pip
install:
  - pip install -e .
before_script:
  - pip install --upgrade pytest pytest-pylint pytest-cov codecov
script:
  - pytest
after_success:
  - codecov
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: mozillasecurity
  password:
    secure: FtX88Uio18I+q+XkNkiosbZA80Wj03fFFEHIegUrkoHcnkxFVvOS3L8qHzkk5QJFA7i+O9bttkz+j/p6umd+gMlPrOvs9pw0F3JT9wlFh/e8EklyHCtLIhn9wgnEZeuMt0XsW6emdxVLNlCwo+L5965dKKnytWUPLyRGBQOqw4UQrHnBOnd4owQ352Xr4Yf/Zea22gA6bH7v/rw48M8qMasUwseCvzXgtvPnwU3y0+C/thrR8CJQDECi0ZTbKCFhtWn9dmnwhwrB1Ofe37NsON0YCTUYrXY7Yd7pblPtT8Ek/d6Wf06zPdbo1wasEUqEUzxkO5JXEmQGF9seEEWQ2U0/9s/JwhQf/mFReC1ti8ZuO8eMK6gtCtu3f38jcobGt4nZNV/Ilv9nvNOH4qeNykrhpDnFjkKtvXJQHfhLx+aVqXa9gMa7l060JaVA9gocxCjUMkvkvoesmzJTkY6d6oMQZbST4Y2NNnQJBi9kdNladLC2RM7mzkMMxPLLMvIsgyxH0RBmV/UzwhOOI8NLaQegJ0ewQ79asHTLkyQG8osbWfMxNm3cqq3A/MuV4HvV8Pxf4lLqVt3aIDTxYKJkXjmfKqVl0pcYTBg8OEHfB/PWBiwaQcyzTnVURbi9gg++q2wJ4E8A7q6mS2ksgrnXLRdFpVUhsqb4oBPh+MDGZMw=
  on:
    branch: master
    tags: true
    os: linux
    python: 3.8
